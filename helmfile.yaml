releases:
  - name: streaming-producer
    chart: helm/streaming-service
    values:
      - image:
          repository: localhost/streaming-producer
          tag: 0.0.6
        appConfig:
          spring:
            application:
              name: streaming-producer
            rabbitmq:
              host: cluster1
              username: default_user_MMPMaInRnalJfVI0CLW
              password: 59851ZcAEabItp31aS8fbYiOcu_eyAKm
          wavefront:
            application:
              name: streaming-example
          management:
            metrics:
              export:
                wavefront:
                  api-token: {{ requiredEnv "WAVEFRONT_TOKEN" }}
                  uri: https://longboard.wavefront.com

  - name: streaming-consumer
    chart: helm/streaming-service
    values:
      - image:
          repository: localhost/streaming-consumer
          tag: 0.0.6
        appConfig:
          spring:
            application:
              name: streaming-consumer
            rabbitmq:
              host: cluster1
              username: default_user_MMPMaInRnalJfVI0CLW
              password: 59851ZcAEabItp31aS8fbYiOcu_eyAKm
          wavefront:
            application:
              name: streaming-example
          management:
            metrics:
              export:
                wavefront:
                  api-token: {{ requiredEnv "WAVEFRONT_TOKEN" }}
                  uri: https://longboard.wavefront.com

  - name: streaming-processor1
    chart: helm/streaming-service
    values:
      - image:
          repository: localhost/streaming-processor1
          tag: 0.0.6
        appConfig:
          spring:
            application:
              name: streaming-processor1
            rabbitmq:
              host: cluster1
              username: default_user_MMPMaInRnalJfVI0CLW
              password: 59851ZcAEabItp31aS8fbYiOcu_eyAKm
            cloud:
              stream:
                bindings:
                  peopleProcessor1-in-0:
                    group: processor1
                    destination: peopleProducer-out-0
                  peopleProcessor1-out-0:
                    destination: peopleConsumer-in-0
          wavefront:
            application:
              name: streaming-example
          management:
            metrics:
              export:
                wavefront:
                  api-token: {{ requiredEnv "WAVEFRONT_TOKEN" }}
                  uri: https://longboard.wavefront.com
        scaling:
          rabbitMQ:
            enabled: true
            apiUrl: "http://default_user_MMPMaInRnalJfVI0CLW:59851ZcAEabItp31aS8fbYiOcu_eyAKm@cluster1.default:15672/"
            queueName: "peopleProducer-out-0.processor1"

  - name: streaming-processor2
    chart: helm/streaming-service
    values:
      - image:
          repository: localhost/streaming-processor2
          tag: 0.0.6
        appConfig:
          spring:
            application:
              name: streaming-processor2
            rabbitmq:
              host: cluster1
              username: default_user_MMPMaInRnalJfVI0CLW
              password: 59851ZcAEabItp31aS8fbYiOcu_eyAKm
            cloud:
              stream:
                bindings:
                  peopleProcessor2-in-0:
                    group: processor2
                    destination: peopleProducer-out-0
                  peopleProcessor2-out-0:
                    destination: peopleConsumer-in-0
          wavefront:
            application:
              name: streaming-example
          management:
            metrics:
              export:
                wavefront:
                  api-token: {{ requiredEnv "WAVEFRONT_TOKEN" }}
                  uri: https://longboard.wavefront.com
        scaling:
          rabbitMQ:
            enabled: true
            apiUrl: "http://default_user_MMPMaInRnalJfVI0CLW:59851ZcAEabItp31aS8fbYiOcu_eyAKm@cluster1.default:15672/"
            queueName: "peopleProducer-out-0.processor2"
